(()=>{"use strict";const t=class{constructor(t){this.element=t,this.filterButtons=this.element.querySelectorAll(".filterable-filter-button"),this.cardsItems=[...this.element.querySelectorAll(".ablocks-block--filterable-cards-item")],this.showMoreButton=this.element.querySelector(".filterable-cards-showMore-button"),this.searchInput=this.element.querySelector(".filterable-searchInput"),this.searchToggleBtn=this.element.querySelector(".filterable-search-toggle-btn"),this.filterListDropdown=this.element.querySelector(".filterable-cards_filter-list-dropdown"),this.filterSearchNoItemText=this.element.querySelector(".filterable-search-item-not-found-text"),this.searchFilterS=this.element.querySelector(".filterable-search-select"),this.firstCategory=this.filterButtons[0]?.dataset.category?.toLowerCase()||"all",this.showItemNumber=parseInt(this.element?.getAttribute("itemShows")||"0",10),this.animation=this.element?.dataset.animation||"fade-in",this.layout=this.element?.dataset.layout||"filter",this.animationDuration=this.element?.dataset.animationDuration,this.perPageShowCardNumber=parseInt(this.showMoreButton?.dataset.perPage||"0",10),this.noMoreText=this.showMoreButton?.dataset.noItemText||"No more items.",this.loadMoreText=this.showMoreButton?.dataset.moreButtonText||"Show More",this.currentlyShown=this.showItemNumber,this.animationDuration=parseInt(this.element?.getAttribute("data-duration")||"500",10),this.enableFilter="true"===this.element?.getAttribute("data-enableFilter"),this.init()}filterCards(t,e){let i=0;const s="filter&search"===this.layout;this.cardsItems.forEach((o=>{const r=o.dataset.category?.toLowerCase()||"",l=o.querySelector("h1, h2, h3, h4, h5, h6")?.textContent.trim().toLowerCase()||"",a=!t||l.includes(t.toLowerCase()),n=e===this.firstCategory||r===e;this.toggleItem(o,(!s||a)&&n&&i<this.currentlyShown),s&&!a||!n||i++})),this.enableFilter?(this.filterSearchNoItemText.style.display=i?"none":"block",this.toggleShowMoreButton(e,t)):this.toggleShowMoreButton("all",t)}applyFilter(t,e=!0){const i=this.searchInput?.value.trim().toLowerCase()||"";e&&(this.currentlyShown=this.showItemNumber),this.filterCards(i,t)}toggleItem(t,e){t.classList.toggle(this.animation,e),t.style.display=e?"block":"none",t.style.visibility=e?"visible":"hidden"}toggleShowMoreButton(t,e=""){const i=e.toLowerCase(),s="filter&search"===this.layout,o=this.cardsItems.filter((e=>{const o=e.dataset.category?.toLowerCase()||"",r=e.querySelectorAll("h1, h2, h3, h4, h5, h6"),l=!s||[...r].some((t=>t.textContent.trim().toLowerCase().includes(i)));return(t===this.firstCategory||o===t)&&l})),r=o.slice(this.currentlyShown);if(this.showMoreButton){if(o.length<=this.showItemNumber)return void(this.showMoreButton.style.visibility="hidden");r.length>0?(this.showMoreButton.style.visibility="visible",this.showMoreButton.innerText=this.loadMoreText||"Show More"):setTimeout((()=>{this.showMoreButton.innerText=this.noMoreText||"No more items.",setTimeout((()=>{this.showMoreButton.style.visibility="hidden"}),2e3)}),1e3)}}handleButtonClick(t){const e=t.target.closest(".filterable-filter-button");if(!e)return;const i=e.dataset.category?.toLowerCase()||"all";this.applyFilter(i),this.filterButtons.forEach((t=>t.classList.remove("filterable-filter-button-active"))),e.classList.add("filterable-filter-button-active"),this.searchFilterS&&(this.searchFilterS.innerText=e.textContent,this.filterListDropdown.style.display="none")}handleShowMoreClick(){this.currentlyShown+=this.perPageShowCardNumber;const t=[...this.filterButtons].find((t=>t.classList.contains("filterable-filter-button-active")))||this.filterButtons[0];if(t){const e=t.dataset.category?.toLowerCase()||"all";this.applyFilter(e,!1)}else this.applyFilter("all",!1)}handleSearchInput(t){const e=t.target.value.trim().toLowerCase(),i=[...this.filterButtons].find((t=>t.classList.contains("filterable-filter-button-active")))||this.filterButtons[0],s=i.dataset.category?.toLowerCase()||"all";this.filterCards(e,s)}initializeActiveButton(){const t=[...this.filterButtons].find((t=>t.classList.contains("filterable-filter-button-active")))||this.filterButtons[0];t?(this.applyFilter(t.dataset.category?.toLowerCase()||"all"),t.classList.add("filterable-filter-button-active")):this.applyFilter("all")}toggleSearchDropdown(){this.searchToggleBtn?.addEventListener("click",(()=>{const t="none"===this.filterListDropdown.style.display||!this.filterListDropdown.style.display;this.filterListDropdown.style.display=t?"block":"none"}))}setAnimationDuration(){this.cardsItems&&this.cardsItems.forEach((t=>{t.style.setProperty("--animation-duration",`${this.animationDuration}ms`)}))}init(){this.setAnimationDuration(),this.filterButtons.forEach((t=>t.addEventListener("click",(t=>this.handleButtonClick(t))))),this.showMoreButton?.addEventListener("click",(()=>this.handleShowMoreClick())),this.searchInput?.addEventListener("input",(t=>this.handleSearchInput(t))),this.initializeActiveButton(),this.toggleSearchDropdown()}};document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".ablocks-block--filterable-cards").forEach((e=>{new t(e)}))}))})();